
<!DOCTYPE doctype html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<meta content="ie=edge" http-equiv="x-ua-compatible"/>
<meta content="Baltica - Integrated differential junction usage (DJU)" name="description"/>
<link href="https://github.com/dieterich-lab/Baltica/setup.html" rel="canonical"/>
<meta content="Thiago Britto-Borges" name="author"/>
<meta content="Copy to clipboard" name="lang:clipboard.copy"/>
<meta content="Copied to clipboard" name="lang:clipboard.copied"/>
<meta content="en" name="lang:search.language"/>
<meta content="True" name="lang:search.pipeline.stopwords"/>
<meta content="True" name="lang:search.pipeline.trimmer"/>
<meta content="No matching documents" name="lang:search.result.none"/>
<meta content="1 matching document" name="lang:search.result.one"/>
<meta content="# matching documents" name="lang:search.result.other"/>
<meta content="[\s\-]+" name="lang:search.tokenizer"/>
<link href="assets/images/favicon.png" rel="shortcut icon"/>
<meta content="mkdocs-1.0.4, mkdocs-material-4.6.3" name="generator"/>
<title>3 - Getting started - Baltica Documentation</title>
<link href="assets/stylesheets/application.adb8469c.css" rel="stylesheet"/>
<link href="assets/stylesheets/application-palette.a8b3c06d.css" rel="stylesheet"/>
<meta content="#757575" name="theme-color"/>
<script src="assets/javascripts/modernizr.86422ebf.js"></script>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&amp;display=fallback" rel="stylesheet"/>
<style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
<link href="assets/fonts/material-icons.css" rel="stylesheet"/>
<link href="extra.css" rel="stylesheet"/>
</head>
<body data-md-color-accent="blue-grey" data-md-color-primary="grey" dir="ltr">
<svg class="md-svg">
<defs>
<svg height="448" id="__github" viewbox="0 0 416 448" width="416" xmlns="http://www.w3.org/2000/svg"><path d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z" fill="currentColor"></path></svg>
</defs>
</svg>
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
<a class="md-skip" href="#getting-started" tabindex="0">
        Skip to content
      </a>
<header class="md-header" data-md-component="header">
<nav class="md-header-nav md-grid">
<div class="md-flex">
<div class="md-flex__cell md-flex__cell--shrink">
<a aria-label="Baltica Documentation" class="md-header-nav__button md-logo" href="https://github.com/dieterich-lab/Baltica" title="Baltica Documentation">
<i class="md-icon"></i>
</a>
</div>
<div class="md-flex__cell md-flex__cell--shrink">
<label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
</div>
<div class="md-flex__cell md-flex__cell--stretch">
<div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
<span class="md-header-nav__topic">
              Baltica Documentation
            </span>
<span class="md-header-nav__topic">
              
                3 - Getting started
              
            </span>
</div>
</div>
<div class="md-flex__cell md-flex__cell--shrink">
<label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="query" data-md-state="active" name="query" placeholder="Search" spellcheck="false" type="text"/>
<label class="md-icon md-search__icon" for="__search"></label>
<button class="md-icon md-search__icon" data-md-component="reset" tabindex="-1" type="reset">
        
      </button>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="">
<div class="md-search-result" data-md-component="result">
<div class="md-search-result__meta">
            Type to start searching
          </div>
<ol class="md-search-result__list"></ol>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="md-flex__cell md-flex__cell--shrink">
<div class="md-header-nav__source">
<a class="md-source" data-md-source="github" href="https://github.com/dieterich-lab/Baltica/" title="Go to repository">
<div class="md-source__icon">
<svg height="24" viewbox="0 0 24 24" width="24">
<use height="24" width="24" xlink:href="#__github"></use>
</svg>
</div>
<div class="md-source__repository">
    GitHub
  </div>
</a>
</div>
</div>
</div>
</nav>
</header>
<div class="md-container">
<main class="md-main" role="main">
<div class="md-main__inner md-grid" data-md-component="container">
<div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav class="md-nav md-nav--primary" data-md-level="0">
<label class="md-nav__title md-nav__title--site" for="__drawer">
<a class="md-nav__button md-logo" href="https://github.com/dieterich-lab/Baltica" title="Baltica Documentation">
<i class="md-icon"></i>
</a>
    Baltica Documentation
  </label>
<div class="md-nav__source">
<a class="md-source" data-md-source="github" href="https://github.com/dieterich-lab/Baltica/" title="Go to repository">
<div class="md-source__icon">
<svg height="24" viewbox="0 0 24 24" width="24">
<use height="24" width="24" xlink:href="#__github"></use>
</svg>
</div>
<div class="md-source__repository">
    GitHub
  </div>
</a>
</div>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="index.html" title="1 - Index">
      1 - Index
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="intro.html" title="2 - Introduction">
      2 - Introduction
    </a>
</li>
<li class="md-nav__item md-nav__item--active">
<input class="md-toggle md-nav__toggle" data-md-toggle="toc" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
        3 - Getting started
      </label>
<a class="md-nav__link md-nav__link--active" href="setup.html" title="3 - Getting started">
      3 - Getting started
    </a>
<nav class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">Table of contents</label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#getting-started">
    Getting started
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#install-miniconda">
    Install miniconda
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#clone-and-install-baltica">
    Clone and install Baltica
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#install-snakemake">
    Install Snakemake
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#install-majiq">
    Install Majiq
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#installation-leafcutter">
    Installation Leafcutter
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#install-junctionseq">
    Install Junctionseq
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#cloning-or-installing-baltica">
    Cloning or installing Baltica?
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#baltica-command-line-arguments">
    Baltica command-line arguments
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#executing-a-baltica-workflow">
    Executing a Baltica workflow
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="workflows.html" title="4 - Methods">
      4 - Methods
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="benchmark.html" title="5 - Benchmark with artificial transcripts">
      5 - Benchmark with artificial transcripts
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="integration.html" title="6 - DJU methods result integration">
      6 - DJU methods result integration
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="release-notes.html" title="Release notes">
      Release notes
    </a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">Table of contents</label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#getting-started">
    Getting started
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#install-miniconda">
    Install miniconda
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#clone-and-install-baltica">
    Clone and install Baltica
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#install-snakemake">
    Install Snakemake
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#install-majiq">
    Install Majiq
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#installation-leafcutter">
    Installation Leafcutter
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#install-junctionseq">
    Install Junctionseq
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#cloning-or-installing-baltica">
    Cloning or installing Baltica?
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#baltica-command-line-arguments">
    Baltica command-line arguments
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#executing-a-baltica-workflow">
    Executing a Baltica workflow
  </a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content">
<article class="md-content__inner md-typeset"><a class="md-content__icon pdf-download-btn" download href="pdf/baltica_docs.pdf" title="Download"><i class="fa fas fa-download"></i><small> PDF</small></a>
<a class="md-icon md-content__icon" href="https://github.com/dieterich-lab/Baltica/tree/master/docs/setup.md" title="Edit this page"></a>
<h1>3 - Getting started</h1>
<h2 id="getting-started">Getting started<a class="headerlink" href="#getting-started" title="Permanent link">¶</a></h2>
<p>Baltica contains a collection of workflows and analysis scripts. Workflows are powered by <a href="https://snakemake.readthedocs.io/en/stable/">Snakemake</a> <sup id="fnref:1"><a class="footnote-ref" href="#fn:1">1</a></sup>. Analysis is done with the R using Bioconductor packages. 
We developed and tested the workflows with the Debian Linux distribution (v8.11 Jesse) and conda (4.8.3).
We use the module system to test the workflows, but conda usage is similar. 
Below, we document how to install the Baltica dependencies. </p>
<h2 id="install-miniconda">Install miniconda<a class="headerlink" href="#install-miniconda" title="Permanent link">¶</a></h2>
<div class="codehilite"><pre><span></span><code>wget https://repo.anaconda.com/miniconda/Miniconda3-latest-Linux-x86_64.sh
bash Miniconda3-latest-Linux-x86_64.sh
</code></pre></div>
<p>Or get miniconda <a href="https://docs.conda.io/en/latest/miniconda.html">here</a>. </p>
<p>Follow the instructions to finish then installation, which by default is at <code>$HOME/miniconda3</code>.</p>
<p>Make sure you initialize conda with <code>conda init</code>.
You can test whether your installation was successful or not by running <code>conda --version</code> and you may need to restart your shell instance. </p>
<h2 id="clone-and-install-baltica">Clone and install Baltica<a class="headerlink" href="#clone-and-install-baltica" title="Permanent link">¶</a></h2>
<div class="codehilite"><pre><span></span><code>git clone https://github.com/dieterich-lab/baltica
<span class="nb">cd</span> baltica
python setup.py install
</code></pre></div>
<h2 id="install-snakemake">Install Snakemake<a class="headerlink" href="#install-snakemake" title="Permanent link">¶</a></h2>
<div class="codehilite"><pre><span></span><code>conda install -c bioconda snakemake<span class="s2">"&gt;=5.2"</span> --yes
</code></pre></div>
<div class="admonition danger">
<p class="admonition-title">Danger</p>
<p>Snakemake requires python versions between &gt; 3.4 and &lt; 3.6.</p>
</div>
<p>Some of dependencies can be directly created with conda, go to <code>baltica/envs</code> directory and install with:  </p>
<div class="codehilite"><pre><span></span><code>conda env create -f stringtie.yml
</code></pre></div>
<p>and</p>
<div class="codehilite"><pre><span></span><code>conda env create -f qc.yml
</code></pre></div>
<p>In general, R packages do not play nicely with conda, but we still use it because it's flexibility and the ability to 
create isolated software environments.</p>
<p>Stringtie citation <sup id="fnref:5"><a class="footnote-ref" href="#fn:5">5</a></sup>.</p>
<h2 id="install-majiq">Install Majiq<a class="headerlink" href="#install-majiq" title="Permanent link">¶</a></h2>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Majiq requires an Academic or Commercial license for use. Users are required to obtain their license. <a href="https://majiq.biociphers.org/app_download/">Academic download</a>.</p>
</div>
<p>Majiq<sup id="fnref:2"><a class="footnote-ref" href="#fn:2">2</a></sup> can installation can be problematic, but the recipe below works for us:</p>
<div class="codehilite"><pre><span></span><code>conda create --name majiq_env <span class="nv">python</span><span class="o">=</span><span class="m">3</span>.6 htslib <span class="s2">"Cython==0.29.14"</span> git pip --yes -c bioconda
conda activate majiq_env

<span class="nv">ENV_PATH</span><span class="o">=</span><span class="nv">$HOME</span>/miniconda3/envs/majiq_env
<span class="nb">export</span> <span class="nv">HTSLIB_LIBRARY_DIR</span><span class="o">=</span><span class="nv">$ENV_PATH</span>/lib
<span class="nb">export</span> <span class="nv">HTSLIB_INCLUDE_DIR</span><span class="o">=</span><span class="nv">$ENV_PATH</span>/include
pip install git+https://bitbucket.org/biociphers/majiq_academic.git#egg<span class="o">=</span>majiq 
</code></pre></div>
<div class="admonition danger">
<p class="admonition-title">Danger</p>
<p>Confirm that <code>pip</code> used is the one from the <code>majiq_env</code> with <code>which pip</code> </p>
</div>
<p>Please inform us if you have issues with this recipe.</p>
<h2 id="installation-leafcutter">Installation Leafcutter<a class="headerlink" href="#installation-leafcutter" title="Permanent link">¶</a></h2>
<p>Users can install Leafcutter<sup id="fnref:3"><a class="footnote-ref" href="#fn:3">3</a></sup> with conda using the following recipe: </p>
<div class="codehilite"><pre><span></span><code>conda create --name leafcutter <span class="nv">python</span><span class="o">=</span><span class="m">2</span>.7
conda activate leafcutter
conda install -c bioconda samtools r-base<span class="o">=</span><span class="m">3</span>.6

<span class="nv">TAR</span><span class="o">=</span><span class="s1">'/bin/tar'</span>
Rscript -e <span class="s2">"install.packages('devtools', repos='http://cran.us.r-project.org')"</span>
Rscript -e <span class="s2">"devtools::install_github('stan-dev/rstantools')"</span>
</code></pre></div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Only use <code>TAR='/bin/tar'</code> or <code>set TAR '/bin/tar'</code> if you have problems with devtools selecting <code>gtar</code> instead of <code>tar</code>.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>If you are experiencing the following the <code>ERROR: failed to create lock directory</code> error when trying to install R packages, add the following option to install.package <code>INSTALL_opts = c('--no-lock')</code>.</p>
</div>
<h2 id="install-junctionseq">Install Junctionseq<a class="headerlink" href="#install-junctionseq" title="Permanent link">¶</a></h2>
<p>JunctionSeq<sup id="fnref:4"><a class="footnote-ref" href="#fn:4">4</a></sup> should be installed directly from BioConductor:</p>
<div class="codehilite"><pre><span></span><code>conda env create -f envs/junctionseq.ym
conda activate leafcutter
Rscript -e <span class="s2">"BiocManager::install('JunctionSeq')"</span>
</code></pre></div>
<h2 id="cloning-or-installing-baltica">Cloning or installing Baltica?<a class="headerlink" href="#cloning-or-installing-baltica" title="Permanent link">¶</a></h2>
<p>Baltica can either installed as a python package or cloned from Github for each project.
The installed version of Baltica is more convenient to be used with:<br/>
<code>baltica qc config.yml</code> (as long the dependencies are available).
Users who intend to modify the workflows should clone the framework and keep the change under version. 
See (workflows)[workflows.md] for details on each available workflow configuration and parameters.</p>
<h2 id="baltica-command-line-arguments">Baltica command-line arguments<a class="headerlink" href="#baltica-command-line-arguments" title="Permanent link">¶</a></h2>
<p>Use the command below to list the command line arguments and their options: </p>
<div class="codehilite"><pre><span></span><code>baltica --help
</code></pre></div>
<h2 id="executing-a-baltica-workflow">Executing a Baltica workflow<a class="headerlink" href="#executing-a-baltica-workflow" title="Permanent link">¶</a></h2>
<ul>
<li>with the <a href="https://modules.readthedocs.io/en/latest/index.html">modules system</a>:
    <code>baltica qc config.yml --use-envmodule</code></li>
<li>with conda enviroments:
    <code>baltica qc config.yml --use-conda</code></li>
<li>using an external conda environment, like the one we used for Majiq installation:
    set <code>majiq_env_prefix = conda activate majiq_env;</code> in the configuration file</li>
</ul>
<p>There are alternatives to provide the software dependencies to Snakemake workflows, so feel free to contact them if you need an option.</p>
<div class="footnote">
<hr/>
<ol>
<li id="fn:1">
<p>If you use Baltica, please also <a href="https://bioinformatics.oxfordjournals.org/content/28/19/2520">cite Snakemake</a> <a class="footnote-backref" href="#fnref:1" title="Jump back to footnote 1 in the text">↩</a></p>
</li>
<li id="fn:2">
<p>If you use Majiq results, please <a href="https://elifesciences.org/articles/11752">cite it</a> <a class="footnote-backref" href="#fnref:2" title="Jump back to footnote 2 in the text">↩</a></p>
</li>
<li id="fn:3">
<p>If you use Leafcutter results, please <a href="https://www.nature.com/articles/s41588-017-0004-9">cite it</a> <a class="footnote-backref" href="#fnref:3" title="Jump back to footnote 3 in the text">↩</a></p>
</li>
<li id="fn:4">
<p>If you use Junctionseq results, please <a href="http://nar.oxfordjournals.org/content/early/2016/06/07/nar.gkw501.full">cite it</a> <a class="footnote-backref" href="#fnref:4" title="Jump back to footnote 4 in the text">↩</a></p>
</li>
<li id="fn:5">
<p>If you use the Baltica's analysis module, please also <a href="https://www.nature.com/articles/nbt.3122">cite Stringtie</a> <a class="footnote-backref" href="#fnref:5" title="Jump back to footnote 5 in the text">↩</a></p>
</li>
</ol>
</div>
</article>
</div>
</div>
</main>
<footer class="md-footer">
<div class="md-footer-nav">
<nav class="md-footer-nav__inner md-grid">
<a class="md-flex md-footer-nav__link md-footer-nav__link--prev" href="intro.html" rel="prev" title="2 - Introduction">
<div class="md-flex__cell md-flex__cell--shrink">
<i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
</div>
<div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
<span class="md-flex__ellipsis">
<span class="md-footer-nav__direction">
                  Previous
                </span>
                2 - Introduction
              </span>
</div>
</a>
<a class="md-flex md-footer-nav__link md-footer-nav__link--next" href="workflows.html" rel="next" title="4 - Methods">
<div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
<span class="md-flex__ellipsis">
<span class="md-footer-nav__direction">
                  Next
                </span>
                4 - Methods
              </span>
</div>
<div class="md-flex__cell md-flex__cell--shrink">
<i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
</div>
</a>
</nav>
</div>
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-footer-copyright">
<div class="md-footer-copyright__highlight">
            Thiago Britto-Borges, Dieterichlab - MIT License
          </div>
        
        powered by
        <a href="https://www.mkdocs.org" rel="noopener" target="_blank">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
          Material for MkDocs</a>
</div>
</div>
</div>
</footer>
</div>
<script src="assets/javascripts/application.c33a9706.js"></script>
<script>app.initialize({version:"1.0.4",url:{base:"."}})</script>
</body>
</html>